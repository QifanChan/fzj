import{e,R as t,u as n,r}from"./vendor.5933ff1c.js";import{c as o,u as a,E as i,a as c,e as s,A as l,L as u,d as f}from"./fzj.60cfc818.js";var m=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},d="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,p=d||v||Function("return this")(),g=p,b=function(){return g.Date.now()},h=/\s/;var y=function(e){for(var t=e.length;t--&&h.test(e.charAt(t)););return t},E=/^\s+/;var j=function(e){return e?e.slice(0,y(e)+1).replace(E,""):e},N=p.Symbol,w=N,x=Object.prototype,O=x.hasOwnProperty,T=x.toString,k=w?w.toStringTag:void 0;var I=function(e){var t=O.call(e,k),n=e[k];try{e[k]=void 0;var r=!0}catch(a){}var o=T.call(e);return r&&(t?e[k]=n:delete e[k]),o},z=Object.prototype.toString;var C=I,S=function(e){return z.call(e)},$=N?N.toStringTag:void 0;var H=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$&&$ in Object(e)?C(e):S(e)},L=function(e){return null!=e&&"object"==typeof e};var M=j,P=m,A=function(e){return"symbol"==typeof e||L(e)&&"[object Symbol]"==H(e)},U=/^[-+]0x[0-9a-f]+$/i,W=/^0b[01]+$/i,q=/^0o[0-7]+$/i,D=parseInt;var F=m,R=b,Y=function(e){if("number"==typeof e)return e;if(A(e))return NaN;if(P(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=P(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=M(e);var n=W.test(e);return n||q.test(e)?D(e.slice(2),n?2:8):U.test(e)?NaN:+e},_=Math.max,B=Math.min;var G=function(e,t,n){var r,o,a,i,c,s,l=0,u=!1,f=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,a=o;return r=o=void 0,l=t,i=e.apply(a,n)}function v(e){return l=e,c=setTimeout(g,t),u?d(e):i}function p(e){var n=e-s;return void 0===s||n>=t||n<0||f&&e-l>=a}function g(){var e=R();if(p(e))return b(e);c=setTimeout(g,function(e){var n=t-(e-s);return f?B(n,a-(e-l)):n}(e))}function b(e){return c=void 0,m&&r?d(e):(r=o=void 0,i)}function h(){var e=R(),n=p(e);if(r=arguments,o=this,s=e,n){if(void 0===c)return v(s);if(f)return clearTimeout(c),c=setTimeout(g,t),d(s)}return void 0===c&&(c=setTimeout(g,t)),i}return t=Y(t)||0,F(n)&&(u=!!n.leading,a=(f="maxWait"in n)?_(Y(n.maxWait)||0,t):a,m="trailing"in n?!!n.trailing:m),h.cancel=function(){void 0!==c&&clearTimeout(c),l=0,r=s=o=c=void 0},h.flush=function(){return void 0===c?i:b(R())},h};const J=({className:e,name:n,color:r})=>t.createElement("a",{style:{background:`#${r}`},className:o("fzj-label",e),href:`https://github.com/lencx/fzj/discussions?discussions_q=label%3A${n}`},t.createElement("span",null,n));function K(){const e=n(),[o,m]=a(),[d,v]=o,[p,{loading:g,error:b,data:h}]=m,y=r.exports.useCallback(G((()=>{!function(e){const t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;(window.innerHeight||Math.min(document.documentElement.clientHeight,document.body.clientHeight))+n>=t&&e()}((()=>{d.pageInfo.hasNextPage&&p({variables:{cursor:d.pageInfo.cursor}})}))}),500,{leading:!0}),[d.pageInfo]);r.exports.useEffect((()=>(window.addEventListener("scroll",y,!1),()=>{window.removeEventListener("scroll",y,!1)})),[d.pageInfo]),r.exports.useEffect((()=>{!d.list.length&&p()}),[]),r.exports.useEffect((()=>{if(h){const{endCursor:e,hasNextPage:t}=h.repository.discussions.pageInfo;v({pageInfo:{cursor:e,hasNextPage:t},list:[...d.list,...h.repository.discussions.edges||[]]})}}),[h]);const E=e=>{window.open(e)};if(b)return t.createElement(i,null);const j=d.list;return t.createElement("div",{className:"home-view view"},t.createElement("div",{className:"fzj-list-box"},t.createElement("div",{className:"fzj-list"},j.map((({node:n,cursor:r})=>{const{category:o,author:a,number:i,labels:u}=n;return t.createElement("div",{key:r,className:"fzj-item",onClick:()=>{return t=i,void e.push(`/issues/${t}`);var t}},t.createElement("div",{className:"title"},t.createElement("em",{className:"issues",onClick:()=>E(f(i))},"#",i),t.createElement("span",null,n.title)),t.createElement("div",{className:"info"},t.createElement("span",{className:"category",onClick:()=>E(c(o.name))},s[o.emoji]," ",o.name),t.createElement(l,{avatar:a.avatarUrl,name:a.login,onClick:()=>E(a.url)}),t.createElement("div",{className:"labels"},u.edges.map((({node:e})=>t.createElement(J,{key:e.id,name:e.name,color:e.color}))))))})),g&&j.length>0&&t.createElement("p",{className:"data-loading"},"Loading..."))),t.createElement(u,{visible:g&&0===j.length}))}export default K;
